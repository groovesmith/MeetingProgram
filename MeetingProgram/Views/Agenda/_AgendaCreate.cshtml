@using System.Web.Optimization
@using MeetingProgram.Helpers
@model MeetingProgram.Models.MeetingModel.Agenda

@section ViewSpecificJavascript {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/Content/js/site.js")


    <script type="text/javascript">

        $(function () {
            $('#approve-btn').click(function () {
                $('#modal-container').modal('hide');
            });
        });

    </script>

}
<script>
    jQuery(document).ready(function ($) {
        $('#add-topic').on('click', function () {
            jQuery.get('/Agenda/AddTopic').done(function (html) {
                $('#topics-list').html(html);
            });
        });
    });
</script>

<div class="modal-body">
    <div>
        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()

            <div class="form-horizontal">
                <h4>Agenda</h4>
                <hr />
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })


                <div id="topics-list">
                    @Html.EditorForMany(x => x.Topics, x => x.Index)
                </div>

            </div>


        }
    </div>

    @using (Html.BeginForm("Create", "Agenda", FormMethod.Post))
    {       
        <div class="row">
            &nbsp;
        </div>        
        <div class="row">
            <div class="col-md-4 col-md-offset-4">
                <button class="btn btn-success" id="add-topic" type="button">
                    <span class="glyphicon glyphicon-plus"></span>
                </button>
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">
                    Cancel
                </button>
                <button type="submit" id="approve-btn"
                        class="btn btn-danger">
                    Save
                </button>
            </div>
        </div>
    }
</div>
